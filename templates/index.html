<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Buscador Torre Batalla</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #f8f9fa;
        }
        .container {
            max-width: 1400px;
        }
        .table-responsive {
            max-height: 60vh; /* Altura máxima antes de mostrar scroll vertical */
        }
    </style>
</head>
<body>

<div class="container mt-4">
    <div class="text-center mb-4">
        <h1 class="display-5">Buscador de la Torre Batalla</h1>
        <p class="lead">Encuentra entrenadores y Pokémon de la 3ª Generación</p>
    </div>

    <div class="card card-body mb-4">
        <form method="POST" action="/">
            <div class="row g-3">
                <div class="col-md-3">
                    <label for="tipo_entrenador" class="form-label">Tipo de Entrenador</label>
                    <input type="text" class="form-control" id="tipo_entrenador" name="tipo_entrenador">
                </div>
                <div class="col-md-3">
                    <label for="nombre_entrenador" class="form-label">Nombre del Entrenador</label>
                    <input type="text" class="form-control" id="nombre_entrenador" name="nombre_entrenador">
                </div>
                <div class="col-md-3">
                    <label for="modalidad" class="form-label">Modalidad (Lv.)</label>
                    <input type="text" class="form-control" id="modalidad" name="modalidad">
                </div>
                <div class="col-md-3">
                    <label for="nombre_pokemon" class="form-label">Nombre del Pokémon</label>
                    <input type="text" class="form-control" id="nombre_pokemon" name="nombre_pokemon">
                </div>
            </div>
            <div class="d-grid gap-2 d-md-flex justify-content-md-end mt-3">
                <button type="submit" class="btn btn-primary">Buscar</button>
                 <a href="/" class="btn btn-secondary">Limpiar</a>
            </div>
        </form>
    </div>

    <h2 class="text-center mb-3">Resultados de la Búsqueda</h2>
    <div class="card">
        <div class="table-responsive">
            <table class="table table-striped table-bordered table-hover mb-0">
                <thead class="table-dark" style="position: sticky; top: 0;">
                    <tr>
                        <th>Tipo Entrenador</th>
                        <th>Nombre</th>
                        <th>Modalidad</th>
                        <th>Nombre Pokémon</th>
                        <th>Item</th>
                        <th>Moves 1</th>
                        <th>Moves 2</th>
                        <th>Moves 3</th>
                        <th>Moves 4</th>
                        <th>Nature</th>
                        <th>EVs HP</th>
                        <th>EVs Attack</th>
                        <th>EVs Defense</th>
                        <th>EVs Sp_Atk</th>
                        <th>EVs Sp_Def</th>
                        <th>EVs Speed</th>
                    </tr>
                </thead>
                <tbody>
                    {% if not resultados.empty %}
                        {% for index, row in resultados.iterrows() %}
                        <tr>
                            <td>{{ row['Tipo Entrenador'] }}</td>
                            <td>{{ row['Nombre'] }}</td>
                            <td>{{ row['Modalidad'] }}</td>
                            <td>{{ row['Nombre Pokémon'] }}</td>
                            <td>{{ row['Item'] }}</td>
                            <td>{{ row['Moves 1'] }}</td>
                            <td>{{ row['Moves 2'] }}</td>
                            <td>{{ row['Moves 3'] }}</td>
                            <td>{{ row['Moves 4'] }}</td>
                            <td>{{ row['Nature'] }}</td>
                            <td>{{ row['EVs_HP'] }}</td>
                            <td>{{ row['EVs_Attack'] }}</td>
                            <td>{{ row['EVs_Defense'] }}</td>
                            <td>{{ row['EVs_Sp_Atk'] }}</td>
                            <td>{{ row['EVs_Sp_Def'] }}</td>
                            <td>{{ row['EVs_Speed'] }}</td>
                        </tr>
                        {% endfor %}
                    {% else %}
                        <tr>
                            <td colspan="16" class="text-center text-muted py-4">
                                No se encontraron resultados. Intenta con otros criterios de búsqueda.
                            </td>
                        </tr>
                    {% endif %}
                </tbody>
            </table>
        </div>
    </div>
</div>

</body>
</html>